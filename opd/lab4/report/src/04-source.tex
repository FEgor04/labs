\section{Текст исходной программы}
\begin{table}[h!]
    \centering
    \begin{longtable}{| c | c | c | p{9.5cm} |}
        \hline
        \small
        Адрес & Код команды & Мнемоника           & Комментарии                                           \\
        33D   & 0200        & CLA                 & ---                                                   \\
        33E   & EE19        & ST (IP+1)+25 = 358  & ST R, R = 0                                             \\
        33F   & AE15        & LD (IP+1)+21 = 355  & LD Z                                                   \\
        340   & 0C00        & PUSH                & Добавляет AC=355 в стэк                               \\
        341   & D702        & CALL 702            & Вызывает подпрограмму с аргументом равным 0x355       \\
        342   & 0800        & POP                 & Помещает вершину стэка (ячейку 355) в аккумулятор     \\
        343   & 0740        & DEC                 & AC = AC - 1 = F(Z) - 1                                          \\ 
        344   & 6E13        & SUB (IP+1)+19 = 358 & SUB 0 WTF                                             \\
        345   & EE12        & ST (IP+1)+18 = 358  & R = F(Z)-1                                            \\
        346   & AE10        & LD (IP+1)+16 = 357  & AC = X                                            \\
        347   & 0740        & DEC                 & AC = X - 1                                      \\
        348   & 0C00        & PUSH                & Добавляет AC в стэк                                   \\
        349   & D702        & CALL 702            & Вызывает подпрограмму с аргументом равным (0x357) - 1 \\
        34A   & 0800        & POP                 & AC = F(X-1)                                                   \\
        34B   & 6E0C        & SUB (IP+1)+12 = 358 & AC = F(X-1) - (F(Z)-1)                                                   \\
        34C & EE0B & ST (IP+1)+11 = 358 & R = F(X-1) - (F(Z)-1) \\
        34D & AE08 & LD (IP+1)+8 = 356 & LD Y \\
        34E & 0740 & DEC & AC = Y - 1 \\
        34F & 0C00 & PUSH & --- \\
        350 & D702 & CALL \$F & --- \\
        351 & 0800 & POP & AC = F(Y-1) \\
        352 & 4E05 & ADD (IP+1)+5 = 358 & ADD R, AC = F(Y-1) + F(X-1) - F(Z) + 1 \\
        353 & EE04 & ST (IP+1+4) = 358 & ST R \\
        354 & 0100 & HLT & --- \\
        355 & ZZZZ & Z & Переменная Z \\
        356 & YYYY & Y & Переменная Y \\
        357 & XXXX & X & Переменная X \\
        358 & FF8C & R & Результат \\
        \hline
        \hline
        702   & AC01        & LD \&1              & Загружает в аккумулятор аргумент функции              \\
        703   & F001        & BEQ (IP+1)+1 = 705  & Переход если аргумент равен 0                         \\
        704   & F307        & BPL (IP+1)+7 = 70C  & Переход если аргумент > 0                             \\
        705   & 7E09        & CMP (IP+1)+9 = 70E  & Установить значение флагов по операции AC - 70E       \\
        706   & F805        & BLT (IP+1)+5 = 70C  & Переход если строго меньше                            \\
        707   & F004        & BEQ (IP+1)+4 = 70C  & Переход если равно 0                                  \\
        708   & 0500        & ASL                 & Сдвиг влево, умножение на два                                                   \\
        709   & 0500        & ASL                 & Сдвиг влево, умножение на два                                                   \\
        70A   & 6E05        & SUB (IP+1)+5 = 710  & ---                                                   \\
        70B   & CE01        & JUMP (IP+1)+1 = 70D & ---                                                   \\
        70C   & AE02        & LD (IP+1)+2 = 70F   & ---                                                   \\
        70D   & EC01        & ST \&1              & ---                                                   \\
        70E   & 0A00        & RET                 & ---                                                   \\
        70F   & F8A5        & BLT (IP+1+165)=7B4  & ---                                                   \\
        710 & 006D & Переменная для сравнения & --- \\
        \hline
    \end{longtable}
    \caption{Текст исходной программы}
\end{table}

\subsection{Предназначение и описание программы}
Программа вычисляет значение формулы $F(X-1) + F(Y-1) - F(Z) + 1$ для данных $X, Y, Z$.

\[ 
   F(X) = \begin{cases}
    F8A5_{16}, & x > 0 \\
    4x - 006D_{16}, & 2560 < x < 0 \\
    F8A5_{16}, & x - 0A00_{16} < 0 \\
   \end{cases}
\]

Второе условие системы никогда не выполняется, поэтому функция всегда возвращает константу.
В десятичной системе:
\[ 
   F(X) = -1883
\]
\begin{figure}
    \centering
    \includesvg[width=\textwidth]{img/desmos-graph.svg}
    \caption{График функции, реализуемой подпрограммой}
\end{figure}

\subsection{Область представления}
Для программы:
$X, Y, Z, R$ --- 16-битные знаковые числа.

Для подпрограммы: $X$ --- 16 битное знаковое число.
\subsection{Область допустимых значений}

Для программы: $2^{15} \leq x \leq 2^{15} - 1$
Для подпрограммы: $2^{15} \leq x < 2^{15} - 1$ --- так как в любом случае функция возвращает константу.

\subsection{Трассировка}
\input{src/05-trace.tex}
