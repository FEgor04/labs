import{u as c,s as u,b as d,a as l}from"./api-f187c826.js";import{u as m}from"./useMutation-a9edc2b0.js";import{d as _,u as p,e as h,o as a,c as r,a as k}from"./index-fbd9a00a.js";async function f(s){return(await l.post("/v1/signin/vk",s)).data}function v(s){const t=c();return m(e=>f(e),{mutationKey:["viewer"],onSuccess(e){t.invalidateQueries({queryKey:["viewer"]}),u(e.session.accessToken),d(e.session.refreshToken),s()}})}const y={key:0},w={key:1},x=k("h1",{class:"text-center mt-8 text-2xl"}," Загрузка... ",-1),C=[x],S=_({__name:"vk",setup(s){const t=p();let e=new URLSearchParams(window.location.search),i=e.has("code"),n=e.get("code");if(n!=null){const{mutate:o}=v(()=>{t.push("/main")});o({code:n})}return(o,g)=>h(i)?(a(),r("div",w,C)):(a(),r("div",y," Ошибочка! Кода-то нету! "))}});export{S as default};
