import{_ as k,a as b,b as f,c as p,d as h,e as S,f as T}from"./Label.vue_vue_type_script_setup_true_lang-8bff7503.js";import{_ as m}from"./Button.vue_vue_type_script_setup_true_lang-0db4ac5a.js";import{d as U,u as $,o as q,h as I,w as a,b as s,e,f as l,a as d,T as x,U as C,p as R,l as B,_ as N}from"./index-fbd9a00a.js";import{u as K,s as L,b as M,a as v}from"./api-f187c826.js";import{u as Q}from"./useMutation-a9edc2b0.js";async function z(t){const o=await v.post("/v1/signup",t);return v.interceptors.request.use,o.data}function A(t){const o=K();return Q(n=>z(n),{mutationKey:["viewer"],onSuccess(n){o.invalidateQueries({queryKey:["viewer"]}),L(n.session.accessToken),M(n.session.refreshToken),t()}})}const w=t=>(R("data-v-1f281270"),t=t(),B(),t),D=w(()=>d("span",{class:"text-red-600"},"*",-1)),j=w(()=>d("span",{class:"text-red-600"},"*",-1)),E=U({__name:"signup",setup(t){const o=$(),{mutate:n,isLoading:y,isSuccess:g}=A(()=>{o.push("/")});let i="",u="";function V(c){c.preventDefault(),n({email:i,password:u}),g&&o.push("/")}return(c,_)=>(q(),I(e(T),{class:"max-w-md m-4 md:mx-auto"},{default:a(()=>[s(e(b),null,{default:a(()=>[s(e(k),null,{default:a(()=>[l(" Регистрация в системе ")]),_:1})]),_:1}),s(e(h),{class:"space-y-6"},{default:a(()=>[d("form",{id:"form",onSubmit:V},[d("div",null,[s(e(f),{for:"email"},{default:a(()=>[l("Электронная почта "),D]),_:1}),s(e(p),{modelValue:e(i),"onUpdate:modelValue":_[0]||(_[0]=r=>x(i)?i.value=r:i=r),id:"email",type:"email",required:""},null,8,["modelValue"])]),d("div",null,[s(e(f),{for:"password"},{default:a(()=>[l("Пароль "),j]),_:1}),s(e(p),{modelValue:e(u),"onUpdate:modelValue":_[1]||(_[1]=r=>x(u)?u.value=r:u=r),id:"password",type:"password",required:""},null,8,["modelValue"])])],32)]),_:1}),s(e(S),{class:"flex flex-row space-x-4 items-center"},{default:a(()=>[s(e(m),{type:"submit",form:"form",disabled:e(y)},{default:a(()=>[l("Отправить")]),_:1},8,["disabled"]),s(e(C),{to:"/signin"},{default:a(()=>[s(e(m),{size:"sm",variant:"link"},{default:a(()=>[l("Войти")]),_:1})]),_:1})]),_:1})]),_:1}))}});const P=N(E,[["__scopeId","data-v-1f281270"]]);export{P as default};
