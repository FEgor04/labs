import{_ as V,a as $,b as f,c as g,d as C,e as I,f as S}from"./Label.vue_vue_type_script_setup_true_lang-8bff7503.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-0db4ac5a.js";import{d as T,u as R,o as h,h as K,w as o,b as s,e,f as r,a as n,T as v,c as U,k as q,U as B,p as L,l as N,_ as z}from"./index-fbd9a00a.js";import{u as E,s as G,b as M,a as O}from"./api-f187c826.js";import{u as Q}from"./useMutation-a9edc2b0.js";async function j(t){return(await O.post("/v1/signin",t)).data}function A(t){const p=E();return Q(c=>j(c),{mutationKey:["viewer"],onSuccess(c){p.invalidateQueries({queryKey:["viewer"]}),G(c.session.accessToken),M(c.session.refreshToken),t()}})}const m=t=>(L("data-v-02155fde"),t=t(),N(),t),D=m(()=>n("span",{class:"text-red-600"},"*",-1)),F=m(()=>n("span",{class:"text-red-600"},"*",-1)),H={key:0,class:"text-red-600"},J={class:"space-y-4"},P=m(()=>n("img",{class:"h-6 w-6 mr-2",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/VK_Compact_Logo_%282021-present%29.svg/768px-VK_Compact_Logo_%282021-present%29.svg.png"},null,-1)),W=m(()=>n("img",{class:"h-6 w-6 mr-2",src:"https://www.svgrepo.com/show/303108/google-icon-logo.svg"},null,-1)),X=T({__name:"signin",setup(t){const p=R(),{mutate:c,isLoading:k,isError:w}=A(()=>{p.push("/")});let d="",u="";function y(l){l.preventDefault(),c({email:d,password:u})}function x(){const l="51782321",a="http://localhost:8080/oauth/vk";window.location.href=`https://oauth.vk.com/authorize?client_id=${l}&redirect_uri=${a}&display=page&scope=4194304&response_type=code`}function b(){const l="137778051916-osj3hdpside8gni55h3tocdk7glce14r.apps.googleusercontent.com",a="http://localhost:8080/oauth/google",i="https://www.googleapis.com/auth/userinfo.email";window.location.href=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${l}&redirect_uri=${a}&display=page&scope=${i}&response_type=code`}return(l,a)=>(h(),K(e(S),{class:"max-w-md m-4 md:mx-auto"},{default:o(()=>[s(e($),null,{default:o(()=>[s(e(V),null,{default:o(()=>[r(" Вход в систему ")]),_:1})]),_:1}),s(e(C),{class:"space-y-6"},{default:o(()=>[n("form",{id:"form",onSubmit:y},[n("div",null,[s(e(f),{for:"email"},{default:o(()=>[r("Электронная почта "),D]),_:1}),s(e(g),{modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=i=>v(d)?d.value=i:d=i),id:"email",type:"email",required:""},null,8,["modelValue"])]),n("div",null,[s(e(f),{for:"password"},{default:o(()=>[r("Пароль "),F]),_:1}),s(e(g),{modelValue:e(u),"onUpdate:modelValue":a[1]||(a[1]=i=>v(u)?u.value=i:u=i),id:"password",type:"password",required:""},null,8,["modelValue"])]),e(w)?(h(),U("div",H," Неправильный логин или пароль ")):q("",!0)],32),n("div",J,[s(e(_),{class:"bg-vk/20 border border-vk text-vk hover:bg-vk/10",onClick:x},{default:o(()=>[P,r(" Войти с помощью VK ")]),_:1}),s(e(_),{class:"bg-primary/20 border border-primary text-primary hover:bg-primary/10",onClick:b},{default:o(()=>[W,r(" Войти с помощью Google ")]),_:1})])]),_:1}),s(e(I),{class:"flex flex-row space-x-4 items-center"},{default:o(()=>[s(e(_),{type:"submit",form:"form",disabled:e(k)},{default:o(()=>[r("Отправить")]),_:1},8,["disabled"]),s(e(B),{to:"/signup"},{default:o(()=>[s(e(_),{size:"sm",variant:"link"},{default:o(()=>[r("Зарегистрироваться")]),_:1})]),_:1})]),_:1})]),_:1}))}});const te=z(X,[["__scopeId","data-v-02155fde"]]);export{te as default};
